Trang Log M√°y In
1. Th√†nh ph·∫ßn giao di·ªán
Ph·∫ßn ƒë·∫ßu trang (Header)
Ti√™u ƒë·ªÅ trang: "System Logs & Audit"
M√¥ t·∫£: "View and search system logs for troubleshooting and auditing"
Th√¥ng b√°o c·∫£nh b√°o (n·∫øu c√≥ l·ªói ho·∫∑c c·∫£nh b√°o trong h·ªá th·ªëng):
Icon: ‚ö†Ô∏è
Text: "[X] error(s) and [Y] warning(s) in the system. Please review."
M√†u n·ªÅn: V√†ng nh·∫°t (warning) ho·∫∑c ƒê·ªè nh·∫°t (error)
C√≥ n√∫t ƒë√≥ng (X) ·ªü g√≥c ph·∫£i
Ph·∫ßn th·ªëng k√™ (3 cards ngang)
Hi·ªÉn th·ªã s·ªë li·ªáu t·ªïng quan:
Card 1: T·ªïng s·ªë b·∫£n ghi
S·ªë l∆∞·ª£ng: T·ªïng s·ªë log entries
Icon: üìä
M√†u: Xanh d∆∞∆°ng
Card 2: L·ªói
S·ªë l∆∞·ª£ng: S·ªë log c√≥ severity = 'error' ho·∫∑c 'critical'
Icon: ‚ùå
M√†u: ƒê·ªè
Card 3: C·∫£nh b√°o
S·ªë l∆∞·ª£ng: S·ªë log c√≥ severity = 'warning'
Icon: ‚ö†Ô∏è
M√†u: V√†ng
Ph·∫ßn l·ªçc v√† t√¨m ki·∫øm (Filter Section)
Thanh t√¨m ki·∫øm
√î input v·ªõi icon t√¨m ki·∫øm (üîç)
Placeholder: "Search by printer, description, error code..."
T√¨m ki·∫øm theo: v·ªã tr√≠ m√°y in, m√¥ t·∫£, m√£ l·ªói
B·ªô l·ªçc dropdown (2 c·ªôt)
C·ªôt 1:
Dropdown lo·∫°i log
Label: "Type"
C√°c l·ª±a ch·ªçn:
All Types (m·∫∑c ƒë·ªãnh)
Print Job
Error
Maintenance
Status Change
Configuration
Admin Action
Ch·ªâ ch·ªçn ƒë∆∞·ª£c 1 option
C·ªôt 2:
Dropdown m·ª©c ƒë·ªô
Label: "Severity"
C√°c l·ª±a ch·ªçn:
All Levels (m·∫∑c ƒë·ªãnh)
Info
Warning
Error
Critical
Ch·ªâ ch·ªçn ƒë∆∞·ª£c 1 option
B·ªô l·ªçc kho·∫£ng th·ªùi gian (2 c·ªôt)
Date From: Date picker v·ªõi placeholder "From date"
Date To: Date picker v·ªõi placeholder "To date"
Icon l·ªãch (üìÖ) b√™n trong input
N√∫t h√†nh ƒë·ªông
N√∫t "Apply": Button ch√≠nh, √°p d·ª•ng c√°c b·ªô l·ªçc ƒë√£ ch·ªçn
N√∫t "Clear": Button ph·ª•, x√≥a t·∫•t c·∫£ b·ªô l·ªçc v√† reset v·ªÅ m·∫∑c ƒë·ªãnh
B·∫£ng danh s√°ch log (Table)
Ti√™u ƒë·ªÅ b·∫£ng
Text "Log Entries"
Hi·ªÉn th·ªã "Showing [X] of [Y] entries" (X = s·ªë b·∫£n ghi hi·ªán t·∫°i, Y = t·ªïng s·ªë sau khi l·ªçc)
N√∫t "Export": Button ph·ª•, xu·∫•t danh s√°ch hi·ªán t·∫°i ra file PDF
C√°c c·ªôt trong b·∫£ng
Timestamp: Ng√†y gi·ªù (ƒë·ªãnh d·∫°ng: YYYY-MM-DD HH:MM)
C√≥ th·ªÉ s·∫Øp x·∫øp (icon ‚ÜïÔ∏è)
M·∫∑c ƒë·ªãnh: S·∫Øp x·∫øp gi·∫£m d·∫ßn (m·ªõi nh·∫•t ·ªü tr√™n)
Printer: V·ªã tr√≠ m√°y in
ƒê·ªãnh d·∫°ng: "M√É-T√íA-PH√íNG" (v√≠ d·ª•: "LB-101", "SCI-202")
C√≥ th·ªÉ hover ƒë·ªÉ xem th√¥ng tin chi ti·∫øt m√°y in
Type: Lo·∫°i log
Hi·ªÉn th·ªã d·∫°ng badge v·ªõi m√†u t∆∞∆°ng ·ª©ng:
Print Job: Xanh d∆∞∆°ng
Error: ƒê·ªè
Maintenance: Xanh l√°
Status Change: V√†ng
Configuration: T√≠m
Admin Action: X√°m
Severity: M·ª©c ƒë·ªô nghi√™m tr·ªçng
Hi·ªÉn th·ªã d·∫°ng badge v·ªõi m√†u v√† icon:
Info: Xanh nh·∫°t, icon ‚ÑπÔ∏è
Warning: V√†ng, icon ‚ö†Ô∏è
Error: ƒê·ªè, icon ‚ùå
Critical: ƒê·ªè ƒë·∫≠m, icon üî¥
Description: M√¥ t·∫£ ng·∫Øn g·ªçn
Text b·ªã c·∫Øt n·∫øu qu√° d√†i (t·ªëi ƒëa 80 k√Ω t·ª±)
C√≥ "..." n·∫øu b·ªã c·∫Øt
Actions: C·ªôt h√†nh ƒë·ªông
Icon "üëÅÔ∏è View" ho·∫∑c text "Details"
Click ƒë·ªÉ m·ªü modal chi ti·∫øt
T√≠nh nƒÉng c·ªßa b·∫£ng
Hi·ªáu ·ª©ng hover tr√™n m·ªói h√†ng (m√†u n·ªÅn x√°m nh·∫°t)
Click v√†o h√†ng ƒë·ªÉ xem chi ti·∫øt (kh√¥ng ch·ªâ n√∫t Actions)
Responsive: Tr√™n mobile hi·ªÉn th·ªã d·∫°ng card thay v√¨ table
Ph√¢n trang (Pagination)
Hi·ªÉn th·ªã ·ªü cu·ªëi b·∫£ng:
Dropdown s·ªë h√†ng m·ªói trang: (10, 25, 50, 100)
Th√¥ng tin trang: "Page [X] of [Y]"
N√∫t ƒëi·ªÅu h∆∞·ªõng:
Trang ƒë·∫ßu (‚èÆÔ∏è)
Trang tr∆∞·ªõc (‚óÄÔ∏è)
S·ªë trang (1, 2, 3, ...)
Trang sau (‚ñ∂Ô∏è)
Trang cu·ªëi (‚è≠Ô∏è)
Tr·∫°ng th√°i kh√¥ng c√≥ d·ªØ li·ªáu (Empty State)
Hi·ªÉn th·ªã khi kh√¥ng t√¨m th·∫•y log (sau khi l·ªçc):
Icon: üìã v·ªõi d·∫•u X
Text: "No logs found"
Text ph·ª•: "Try adjusting your filters or search criteria"
N√∫t "Clear Filters"
Tr·∫°ng th√°i ƒëang t·∫£i (Loading State)
Hi·ªÉn th·ªã khi ƒëang t·∫£i d·ªØ li·ªáu:
Skeleton loader cho c√°c h√†ng trong b·∫£ng
Spinner ·ªü gi·ªØa b·∫£ng
Text: "Loading logs..."
Modal chi ti·∫øt Log:
Header:
Ti√™u ƒë·ªÅ: "Log Details"
Badge hi·ªÉn th·ªã Log ID (m√†u x√°m, font mono)
N√∫t ƒë√≥ng (X) g√≥c ph·∫£i
Body - Chia th√†nh 6 sections:
Section 1: Basic Information
Timestamp: Hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß ng√†y gi·ªù (YYYY-MM-DD HH:MM:SS)
Log Type: Badge m√†u t∆∞∆°ng ·ª©ng lo·∫°i
Severity: Badge m√†u (Info: xanh, Warning: v√†ng, Error: ƒë·ªè, Critical: ƒë·ªè ƒë·∫≠m)
Status: Badge tr·∫°ng th√°i (New/In Progress/Resolved/Closed)
Section 2: Printer Information
Printer ID
Location: [Building]-[Room]
Printer Name: [Brand] [Model]
Serial Number
IP Address (n·∫øu c√≥)
Section 3: Description & Details
Description: Text ƒë·∫ßy ƒë·ªß, xu·ªëng d√≤ng
Error Code: Badge ƒë·ªè (n·∫øu c√≥)
Additional Details: JSON formatted v·ªõi syntax highlighting (n·∫øu c√≥)
Section 4: Print Information (n·∫øu log c√≥ li√™n  quan t·ªõi m·ªôt c√¥ng vi·ªác in)
Print Job ID: Link c√≥ th·ªÉ click
User: T√™n ([ID])
Pages Printed
File Name
Section 5: Resolution Information (ch·ªâ hi·ªán n·∫øu ƒë√£ resolved)
Resolved At: Timestamp
Resolved By: T√™n Nh√¢n vi√™n ([Position])
Resolution Notes: Text
Actions Taken: Danh s√°ch bullet points
Section 6: Datetime
Created At: Timestamp
Last Updated: Timestamp (n·∫øu c√≥)
Footer:
N√∫t "Close" (x√°m)
N√∫t "Mark as Resolved" (xanh, ch·ªâ hi·ªán n·∫øu ch∆∞a resolved)
N√∫t "Add Note" (v√†ng)
2. Flow t∆∞∆°ng t√°c
2.1 T·∫£i trang l·∫ßn ƒë·∫ßu
Ng∆∞·ªùi d√πng truy c·∫≠p trang "System Logs & Audit"
H·ªá th·ªëng query database:
L·∫•y t·∫•t c·∫£ logs t·ª´ b·∫£ng printer_log JOIN v·ªõi printer_physical, room, building
S·∫Øp x·∫øp theo created_at gi·∫£m d·∫ßn (m·ªõi nh·∫•t tr∆∞·ªõc)
Gi·ªõi h·∫°n 10 b·∫£n ghi (k√≠ch th∆∞·ªõc trang m·∫∑c ƒë·ªãnh)
H·ªá th·ªëng t√≠nh to√°n th·ªëng k√™:
ƒê·∫øm t·ªïng s·ªë logs
ƒê·∫øm s·ªë logs c√≥ severity = 'error' ho·∫∑c 'critical'
ƒê·∫øm s·ªë logs c√≥ severity = 'warning'
Hi·ªÉn th·ªã 3 cards th·ªëng k√™ v·ªõi s·ªë li·ªáu
N·∫øu c√≥ errors ho·∫∑c warnings:
Hi·ªÉn th·ªã banner c·∫£nh b√°o ·ªü tr√™n c√πng
Text: "[X] error(s) and [Y] warning(s) in the system. Please review."
Hi·ªÉn th·ªã b·∫£ng v·ªõi 10 logs ƒë·∫ßu ti√™n
Hi·ªÉn th·ªã pagination: "Page 1 of [t·ªïng_s·ªë_trang]"
T·∫•t c·∫£ b·ªô l·ªçc ·ªü tr·∫°ng th√°i m·∫∑c ƒë·ªãnh (All Types, All Levels, kh√¥ng c√≥ ng√†y)
2.2 T√¨m ki·∫øm logs
Ng∆∞·ªùi d√πng nh·∫≠p text v√†o √¥ t√¨m ki·∫øm
H·ªá th·ªëng t·ª± ƒë·ªông t√¨m ki·∫øm (sau 500ms kh√¥ng nh·∫≠p):
T√¨m trong c·ªôt v·ªã tr√≠ m√°y in (M√É-T√íA-PH√íNG)
T√¨m trong c·ªôt m√¥ t·∫£
T√¨m trong c·ªôt m√£ l·ªói
Kh√¥ng ph√¢n bi·ªát ch·ªØ hoa ch·ªØ th∆∞·ªùng
B·∫£ng c·∫≠p nh·∫≠t v·ªõi k·∫øt qu·∫£ t√¨m ki·∫øm
Text "Showing [X] of [Y] entries" c·∫≠p nh·∫≠t
C√°c cards th·ªëng k√™ c·∫≠p nh·∫≠t theo k·∫øt qu·∫£ l·ªçc
N·∫øu kh√¥ng t√¨m th·∫•y:
Hi·ªÉn th·ªã empty state
Text: "No logs found matching '[t·ª´_kh√≥a_t√¨m_ki·∫øm]'"
N√∫t "Clear Search"
2.3 L·ªçc logs
2.3.1 L·ªçc theo lo·∫°i log
Ng∆∞·ªùi d√πng click v√†o dropdown "Type"
Hi·ªÉn th·ªã danh s√°ch c√°c l·ª±a ch·ªçn
Ng∆∞·ªùi d√πng ch·ªçn m·ªôt lo·∫°i (v√≠ d·ª•: "Error")
Dropdown hi·ªÉn th·ªã "Error" (thay v√¨ "All Types")
Ng∆∞·ªùi d√πng click n√∫t "Apply"
H·ªá th·ªëng query l·∫°i v·ªõi ƒëi·ªÅu ki·ªán log_type = 'error'
B·∫£ng c·∫≠p nh·∫≠t v·ªõi k·∫øt qu·∫£ l·ªçc
Cards th·ªëng k√™ c·∫≠p nh·∫≠t
Text "Showing [X] of [Y] entries" c·∫≠p nh·∫≠t
2.3.2 L·ªçc theo m·ª©c ƒë·ªô
Ng∆∞·ªùi d√πng click v√†o dropdown "Severity"
Hi·ªÉn th·ªã danh s√°ch c√°c l·ª±a ch·ªçn
Ng∆∞·ªùi d√πng ch·ªçn m·ªôt m·ª©c ƒë·ªô (v√≠ d·ª•: "Warning")
Dropdown hi·ªÉn th·ªã "Warning" (thay v√¨ "All Levels")
Ng∆∞·ªùi d√πng click n√∫t "Apply"
H·ªá th·ªëng query l·∫°i v·ªõi ƒëi·ªÅu ki·ªán severity = 'warning'
B·∫£ng c·∫≠p nh·∫≠t v·ªõi k·∫øt qu·∫£ l·ªçc
Cards th·ªëng k√™ c·∫≠p nh·∫≠t
2.3.3 L·ªçc theo kho·∫£ng th·ªùi gian
Ng∆∞·ªùi d√πng click v√†o √¥ "Date From"
Hi·ªÉn th·ªã date picker
Ng∆∞·ªùi d√πng ch·ªçn ng√†y b·∫Øt ƒë·∫ßu
Ng∆∞·ªùi d√πng click v√†o √¥ "Date To"
Hi·ªÉn th·ªã date picker
Ng∆∞·ªùi d√πng ch·ªçn ng√†y k·∫øt th√∫c
Ng∆∞·ªùi d√πng click n√∫t "Apply"
H·ªá th·ªëng query l·∫°i v·ªõi ƒëi·ªÅu ki·ªán created_at BETWEEN date_from AND date_to
B·∫£ng c·∫≠p nh·∫≠t v·ªõi k·∫øt qu·∫£ l·ªçc
Cards th·ªëng k√™ c·∫≠p nh·∫≠t
2.3.4 K·∫øt h·ª£p nhi·ªÅu b·ªô l·ªçc
Ng∆∞·ªùi d√πng c√≥ th·ªÉ ch·ªçn nhi·ªÅu b·ªô l·ªçc c√πng l√∫c (Type + Severity + Date Range + Search)
Ng∆∞·ªùi d√πng click n√∫t "Apply"
H·ªá th·ªëng query v·ªõi ƒëi·ªÅu ki·ªán AND cho t·∫•t c·∫£ b·ªô l·ªçc ƒë√£ ch·ªçn
B·∫£ng c·∫≠p nh·∫≠t
N·∫øu kh√¥ng c√≥ k·∫øt qu·∫£: hi·ªÉn th·ªã empty state
2.3.5 X√≥a b·ªô l·ªçc
Ng∆∞·ªùi d√πng click n√∫t "Clear"
T·∫•t c·∫£ dropdowns reset v·ªÅ m·∫∑c ƒë·ªãnh (All Types, All Levels)
Date pickers b·ªã x√≥a (tr·ªëng)
√î t√¨m ki·∫øm b·ªã x√≥a
H·ªá th·ªëng query l·∫°i d·ªØ li·ªáu ban ƒë·∫ßu (kh√¥ng c√≥ b·ªô l·ªçc)
B·∫£ng hi·ªÉn th·ªã t·∫•t c·∫£ logs
Cards th·ªëng k√™ hi·ªÉn th·ªã s·ªë li·ªáu ƒë·∫ßy ƒë·ªß
2.4 S·∫Øp x·∫øp logs
Ng∆∞·ªùi d√πng click v√†o header c·ªôt "Timestamp"
Icon thay ƒë·ªïi:
L·∫ßn 1: ‚Üì (gi·∫£m d·∫ßn - m·ªõi nh·∫•t tr∆∞·ªõc) - m·∫∑c ƒë·ªãnh
L·∫ßn 2: ‚Üë (tƒÉng d·∫ßn - c≈© nh·∫•t tr∆∞·ªõc)
L·∫ßn 3: ‚ÜïÔ∏è (kh√¥ng s·∫Øp x·∫øp)
B·∫£ng s·∫Øp x·∫øp l·∫°i theo th·ª© t·ª± ƒë√£ ch·ªçn
Gi·ªØ nguy√™n c√°c b·ªô l·ªçc ƒëang √°p d·ª•ng
2.5 Thay ƒë·ªïi s·ªë h√†ng m·ªói trang
Ng∆∞·ªùi d√πng click v√†o dropdown "Rows per page"
Hi·ªÉn th·ªã c√°c l·ª±a ch·ªçn: 10, 25, 50, 100
Ng∆∞·ªùi d√πng ch·ªçn m·ªôt s·ªë (v√≠ d·ª•: 25)
H·ªá th·ªëng query l·∫°i v·ªõi LIMIT = 25
B·∫£ng hi·ªÉn th·ªã 25 h√†ng
Pagination c·∫≠p nh·∫≠t s·ªë trang
Reset v·ªÅ trang 1
2.6 ƒêi·ªÅu h∆∞·ªõng gi·ªØa c√°c trang
Ng∆∞·ªùi d√πng click n√∫t "Next" (‚ñ∂Ô∏è)
H·ªá th·ªëng tƒÉng s·ªë trang hi·ªán t·∫°i l√™n 1
Query d·ªØ li·ªáu v·ªõi OFFSET t∆∞∆°ng ·ª©ng
B·∫£ng hi·ªÉn th·ªã d·ªØ li·ªáu trang ti·∫øp theo
Th√¥ng tin trang c·∫≠p nh·∫≠t: "Page [X+1] of [Y]"
T∆∞∆°ng t·ª± cho c√°c n√∫t: Previous, First, Last, ho·∫∑c s·ªë trang c·ª• th·ªÉ
2.7 ƒê√≥ng banner c·∫£nh b√°o
Ng∆∞·ªùi d√πng click n√∫t X tr√™n banner c·∫£nh b√°o
Banner bi·∫øn m·∫•t
Kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn d·ªØ li·ªáu ho·∫∑c b·ªô l·ªçc
Cards th·ªëng k√™ v·∫´n hi·ªÉn th·ªã s·ªë l·ªói v√† c·∫£nh b√°o
Use Cases - NV-5: Log M√°y In
Danh s√°ch c√°c Use Cases
Use Case Index
T√™n Use Case
MoSCoW
NV-5-1
Xem l·ªãch s·ª≠ log m√°y in
Must Have
NV-5-2
Xu·∫•t b√°o c√°o log
Should Have


NV-5-1: Xem l·ªãch s·ª≠ log m√°y in
M·ª•c
N·ªôi dung
Use Case ID
NV-5-1
T√™n
Xem l·ªãch s·ª≠ log m√°y in
M√¥ t·∫£
Nh√¢n vi√™n xem, t√¨m ki·∫øm, l·ªçc v√† s·∫Øp x·∫øp l·ªãch s·ª≠ ho·∫°t ƒë·ªông c·ªßa t·∫•t c·∫£ m√°y in trong h·ªá th·ªëng ƒë·ªÉ gi√°m s√°t, kh·∫Øc ph·ª•c s·ª± c·ªë v√† ki·ªÉm to√°n
Actor
Nh√¢n vi√™n
Trigger
Nh√¢n vi√™n nh·∫•n v√†o menu "System Logs" ho·∫∑c "Logs & Audit" t·ª´ dashboard
Quy ƒë·ªãnh nghi·ªáp v·ª•
‚Ä¢ Ch·ªâ Nh√¢n vi√™n m·ªõi c√≥ quy·ªÅn xem to√†n b·ªô system logs
‚Ä¢ Logs ƒë∆∞·ª£c s·∫Øp x·∫øp m·∫∑c ƒë·ªãnh theo th·ªùi gian m·ªõi nh·∫•t tr∆∞·ªõc
‚Ä¢ M·ªói trang hi·ªÉn th·ªã m·∫∑c ƒë·ªãnh 10 logs, c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh (10, 25, 50, 100)
‚Ä¢ T√¨m ki·∫øm kh√¥ng ph√¢n bi·ªát ch·ªØ hoa ch·ªØ th∆∞·ªùng
‚Ä¢ B·ªô l·ªçc c√≥ th·ªÉ k·∫øt h·ª£p nhi·ªÅu ƒëi·ªÅu ki·ªán (logic AND)
‚Ä¢ C√°c cards th·ªëng k√™ t·ª± ƒë·ªông c·∫≠p nh·∫≠t theo k·∫øt qu·∫£ l·ªçc
‚Ä¢ Logs ƒë∆∞·ª£c l·∫•y t·ª´ b·∫£ng printer_log JOIN v·ªõi c√°c b·∫£ng li√™n quan
‚Ä¢ H·ªá th·ªëng t·ª± ƒë·ªông l√†m m·ªõi th·ªëng k√™ khi c√≥ log m·ªõi (m·ªói 30 gi√¢y)
Main Flow
B∆∞·ªõc 1: T·∫£i trang ban ƒë·∫ßu
1. Nh√¢n vi√™n truy c·∫≠p trang "System Logs & Audit"
2. H·ªá th·ªëng truy v·∫•n c∆° s·ªü d·ªØ li·ªáu:
   ‚Ä¢ L·∫•y logs t·ª´ view printer_log_dashboard
   ‚Ä¢ K·∫øt n·ªëi (JOIN) v·ªõi c√°c b·∫£ng printer_physical, printer_model, brand, room, building
   ‚Ä¢ S·∫Øp x·∫øp theo created_at gi·∫£m d·∫ßn
   ‚Ä¢ Gi·ªõi h·∫°n 10 b·∫£n ghi (k√≠ch th∆∞·ªõc trang m·∫∑c ƒë·ªãnh)
3. H·ªá th·ªëng t√≠nh th·ªëng k√™:
   ‚Ä¢ T·ªïng s·ªë logs: ƒê·∫øm t·∫•t c·∫£ t·ª´ b·∫£ng printer_log
   ‚Ä¢ S·ªë l·ªói: ƒê·∫øm c√°c logs c√≥ severity l√† 'error' ho·∫∑c 'critical'
   ‚Ä¢ S·ªë c·∫£nh b√°o: ƒê·∫øm c√°c logs c√≥ severity l√† 'warning'
4. Hi·ªÉn th·ªã 3 cards th·ªëng k√™ v·ªõi s·ªë li·ªáu
5. N·∫øu c√≥ l·ªói ho·∫∑c c·∫£nh b√°o trong 24 gi·ªù g·∫ßn nh·∫•t:
   ‚Ä¢ Hi·ªÉn th·ªã banner c·∫£nh b√°o m√†u ƒë·ªè/v√†ng
   ‚Ä¢ N·ªôi dung: "[X] error(s) and [Y] warning(s) in the system. Please review."
6. Hi·ªÉn th·ªã b·∫£ng v·ªõi 10 logs ƒë·∫ßu ti√™n
7. Hi·ªÉn th·ªã ph√¢n trang: "Page 1 of [t·ªïng_s·ªë_trang]"
8. T·∫•t c·∫£ b·ªô l·ªçc ·ªü tr·∫°ng th√°i m·∫∑c ƒë·ªãnh

B∆∞·ªõc 2: T√¨m ki·∫øm logs
9. Nh√¢n vi√™n nh·∫≠p t·ª´ kh√≥a v√†o √¥ t√¨m ki·∫øm
10. H·ªá th·ªëng t·ª± ƒë·ªông t√¨m ki·∫øm sau 500ms (kh√¥ng c·∫ßn nh·∫•n Enter):
   ‚Ä¢ Truy v·∫•n v·ªõi ƒëi·ªÅu ki·ªán t√¨m trong:
   ‚Ä¢ V·ªã tr√≠ m√°y in (printer_location) ch·ª©a t·ª´ kh√≥a HO·∫∂C
   ‚Ä¢ M√¥ t·∫£ (description) ch·ª©a t·ª´ kh√≥a HO·∫∂C
   ‚Ä¢ M√£ l·ªói (error_code) ch·ª©a t·ª´ kh√≥a
   ‚Ä¢ Kh√¥ng ph√¢n bi·ªát ch·ªØ hoa ch·ªØ th∆∞·ªùng
11. B·∫£ng c·∫≠p nh·∫≠t hi·ªÉn th·ªã k·∫øt qu·∫£ t√¨m ki·∫øm
12. D√≤ng ch·ªØ "Showing [X] of [Y] entries" ƒë∆∞·ª£c c·∫≠p nh·∫≠t
13. C√°c cards th·ªëng k√™ c·∫≠p nh·∫≠t theo k·∫øt qu·∫£
14. N·∫øu kh√¥ng t√¨m th·∫•y: hi·ªÉn th·ªã tr·∫°ng th√°i r·ªóng (empty state)

B∆∞·ªõc 3: L·ªçc theo lo·∫°i log
15. Nh√¢n vi√™n nh·∫•n v√†o dropdown "Type"
16. Ch·ªçn m·ªôt lo·∫°i (Print Job/Error/Maintenance/Status Change/Configuration/Admin Action)
17. Nh√¢n vi√™n nh·∫•n n√∫t "Apply"
18. H·ªá th·ªëng truy v·∫•n v·ªõi ƒëi·ªÅu ki·ªán log_type b·∫±ng lo·∫°i ƒë√£ ch·ªçn
19. B·∫£ng v√† th·ªëng k√™ ƒë∆∞·ª£c c·∫≠p nh·∫≠t

B∆∞·ªõc 4: L·ªçc theo m·ª©c ƒë·ªô nghi√™m tr·ªçng
20. Nh√¢n vi√™n nh·∫•n v√†o dropdown "Severity"
21. Ch·ªçn m·ª©c ƒë·ªô (Info/Warning/Error/Critical)
22. Nh√¢n vi√™n nh·∫•n n√∫t "Apply"
23. H·ªá th·ªëng truy v·∫•n v·ªõi ƒëi·ªÅu ki·ªán severity b·∫±ng m·ª©c ƒë·ªô ƒë√£ ch·ªçn
24. B·∫£ng v√† th·ªëng k√™ ƒë∆∞·ª£c c·∫≠p nh·∫≠t

B∆∞·ªõc 5: L·ªçc theo kho·∫£ng th·ªùi gian
25. Nh√¢n vi√™n nh·∫•n v√†o date picker "Date From"
26. Ch·ªçn ng√†y b·∫Øt ƒë·∫ßu
27. Nh√¢n vi√™n nh·∫•n v√†o date picker "Date To"
28. Ch·ªçn ng√†y k·∫øt th√∫c
29. Nh√¢n vi√™n nh·∫•n n√∫t "Apply"
30. H·ªá th·ªëng truy v·∫•n v·ªõi ƒëi·ªÅu ki·ªán created_at n·∫±m trong kho·∫£ng t·ª´ date_from ƒë·∫øn date_to
31. B·∫£ng v√† th·ªëng k√™ ƒë∆∞·ª£c c·∫≠p nh·∫≠t

B∆∞·ªõc 6: K·∫øt h·ª£p nhi·ªÅu b·ªô l·ªçc
32. Nh√¢n vi√™n c√≥ th·ªÉ ch·ªçn ƒë·ªìng th·ªùi: Type + Severity + Date Range + Search
33. Nh·∫•n n√∫t "Apply"
34. H·ªá th·ªëng truy v·∫•n v·ªõi t·∫•t c·∫£ ƒëi·ªÅu ki·ªán (logic AND)
35. B·∫£ng hi·ªÉn th·ªã k·∫øt qu·∫£ ƒë√£ l·ªçc

B∆∞·ªõc 7: S·∫Øp x·∫øp logs
36. Nh√¢n vi√™n nh·∫•n v√†o ti√™u ƒë·ªÅ c·ªôt "Timestamp"
37. Icon thay ƒë·ªïi: ‚Üì (gi·∫£m d·∫ßn) ‚Üí ‚Üë (tƒÉng d·∫ßn) ‚Üí ‚ÜïÔ∏è (m·∫∑c ƒë·ªãnh)
38. H·ªá th·ªëng s·∫Øp x·∫øp l·∫°i theo created_at tƒÉng d·∫ßn ho·∫∑c gi·∫£m d·∫ßn
39. B·∫£ng c·∫≠p nh·∫≠t th·ª© t·ª± hi·ªÉn th·ªã

B∆∞·ªõc 8: Thay ƒë·ªïi s·ªë h√†ng m·ªói trang
40. Nh√¢n vi√™n nh·∫•n v√†o dropdown "Rows per page"
41. Ch·ªçn s·ªë l∆∞·ª£ng (10/25/50/100)
42. H·ªá th·ªëng truy v·∫•n l·∫°i v·ªõi gi·ªõi h·∫°n b·∫±ng s·ªë ƒë√£ ch·ªçn
43. B·∫£ng hi·ªÉn th·ªã s·ªë h√†ng m·ªõi
44. Ph√¢n trang ƒë∆∞·ª£c c·∫≠p nh·∫≠t, quay v·ªÅ trang 1

B∆∞·ªõc 9: ƒêi·ªÅu h∆∞·ªõng gi·ªØa c√°c trang
45. Nh√¢n vi√™n nh·∫•n n√∫t ƒëi·ªÅu h∆∞·ªõng (Previous/Next/s·ªë trang/First/Last)
46. H·ªá th·ªëng t√≠nh ph·∫ßn b√π (OFFSET) = (s·ªë trang - 1) √ó k√≠ch th∆∞·ªõc trang
47. Truy v·∫•n d·ªØ li·ªáu v·ªõi OFFSET v√† LIMIT
48. B·∫£ng hi·ªÉn th·ªã d·ªØ li·ªáu trang m·ªõi
49. Th√¥ng tin trang c·∫≠p nh·∫≠t: "Page [X] of [Y]"

B∆∞·ªõc 10: Xem chi ti·∫øt log
50. Nh√¢n vi√™n nh·∫•n n√∫t "View" ho·∫∑c nh·∫•n v√†o h√†ng log
51. H·ªá th·ªëng truy v·∫•n chi ti·∫øt t·ª´ printer_log_dashboard v·ªõi ƒëi·ªÅu ki·ªán log_id b·∫±ng id ƒë√£ ch·ªçn
52. Hi·ªÉn th·ªã modal v·ªõi ƒë·∫ßy ƒë·ªß th√¥ng tin
53. Nh√¢n vi√™n xem chi ti·∫øt v√† ƒë√≥ng modal
54. Quay l·∫°i trang danh s√°ch, gi·ªØ nguy√™n v·ªã tr√≠
Alternative Flow
Alt 1: X√≥a b·ªô l·ªçc
‚Ä¢ T·∫°i b·∫•t k·ª≥ b∆∞·ªõc n√†o c√≥ b·ªô l·ªçc, Nh√¢n vi√™n nh·∫•n n√∫t "Clear"
‚Ä¢ T·∫•t c·∫£ c√°c dropdown ƒë∆∞·ª£c ƒë·∫∑t l·∫°i v·ªÅ "All Types", "All Levels"
‚Ä¢ C√°c date pickers b·ªã x√≥a tr·ªëng
‚Ä¢ √î t√¨m ki·∫øm b·ªã x√≥a
‚Ä¢ H·ªá th·ªëng truy v·∫•n l·∫°i d·ªØ li·ªáu ban ƒë·∫ßu (kh√¥ng c√≥ b·ªô l·ªçc)
‚Ä¢ B·∫£ng v√† th·ªëng k√™ hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß

Alt 2: ƒê√≥ng banner c·∫£nh b√°o
‚Ä¢ Nh√¢n vi√™n nh·∫•n n√∫t X tr√™n banner c·∫£nh b√°o
‚Ä¢ Banner bi·∫øn m·∫•t
‚Ä¢ Kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn d·ªØ li·ªáu v√† b·ªô l·ªçc
‚Ä¢ C√°c cards th·ªëng k√™ v·∫´n hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß

Alt 3: T·ª± ƒë·ªông l√†m m·ªõi th·ªëng k√™
‚Ä¢ Sau m·ªói 30 gi√¢y, h·ªá th·ªëng t·ª± ƒë·ªông:
   ‚Ä¢ Truy v·∫•n l·∫°i s·ªë l∆∞·ª£ng logs m·ªõi
   ‚Ä¢ C·∫≠p nh·∫≠t c√°c cards th·ªëng k√™
   ‚Ä¢ C·∫≠p nh·∫≠t banner c·∫£nh b√°o n·∫øu c√≥ l·ªói m·ªõi
‚Ä¢ Kh√¥ng t·∫£i l·∫°i to√†n b·ªô b·∫£ng (tr√°nh l√†m gi√°n ƒëo·∫°n ng∆∞·ªùi d√πng)
‚Ä¢ Hi·ªÉn th·ªã badge nh·ªè "New" n·∫øu c√≥ logs m·ªõi
Exception Flow
Exc 1: Kh√¥ng c√≥ logs trong h·ªá th·ªëng
‚Ä¢ Truy v·∫•n tr·∫£ v·ªÅ 0 k·∫øt qu·∫£
‚Ä¢ Hi·ªÉn th·ªã tr·∫°ng th√°i r·ªóng:
   ‚Ä¢ Icon: üìã v·ªõi d·∫•u X
   ‚Ä¢ N·ªôi dung: "No logs found"
   ‚Ä¢ N·ªôi dung ph·ª•: "System logs will appear here when printers are used"
‚Ä¢ C√°c cards th·ªëng k√™ hi·ªÉn th·ªã 0
‚Ä¢ Kh√¥ng hi·ªÉn th·ªã b·∫£ng v√† ph√¢n trang

Exc 2: Kh√¥ng t√¨m th·∫•y logs sau khi l·ªçc
‚Ä¢ Truy v·∫•n v·ªõi b·ªô l·ªçc tr·∫£ v·ªÅ 0 k·∫øt qu·∫£
‚Ä¢ Hi·ªÉn th·ªã tr·∫°ng th√°i r·ªóng:
   ‚Ä¢ Icon: üîç v·ªõi d·∫•u X
   ‚Ä¢ N·ªôi dung: "No logs found matching your criteria"
   ‚Ä¢ N·ªôi dung ph·ª•: "Try adjusting your filters or search criteria"
   ‚Ä¢ N√∫t "Clear Filters"
‚Ä¢ C√°c cards th·ªëng k√™ v·∫´n hi·ªÉn th·ªã t·ªïng s·ªë (kh√¥ng theo b·ªô l·ªçc)

Exc 3: L·ªói k·∫øt n·ªëi c∆° s·ªü d·ªØ li·ªáu
‚Ä¢ Truy v·∫•n th·∫•t b·∫°i do m·∫•t k·∫øt n·ªëi
‚Ä¢ Hi·ªÉn th·ªã banner l·ªói:
   ‚Ä¢ Icon: ‚ö†Ô∏è
   ‚Ä¢ N·ªôi dung: "Failed to load logs. Connection error."
   ‚Ä¢ N√∫t "Retry"
‚Ä¢ B·∫£ng hi·ªÉn th·ªã skeleton loader (tr·∫°ng th√°i ƒëang t·∫£i)
‚Ä¢ Nh√¢n vi√™n nh·∫•n "Retry" ‚Üí truy v·∫•n l·∫°i

Exc 4: Timeout khi truy v·∫•n qu√° nhi·ªÅu logs
‚Ä¢ Truy v·∫•n m·∫•t qu√° 30 gi√¢y (qu√° nhi·ªÅu d·ªØ li·ªáu)
‚Ä¢ Hi·ªÉn th·ªã c·∫£nh b√°o:
   ‚Ä¢ N·ªôi dung: "Large dataset detected. Please apply date range filter to improve performance."
‚Ä¢ T·ª± ƒë·ªông th√™m b·ªô l·ªçc kho·∫£ng th·ªùi gian = 30 ng√†y g·∫ßn nh·∫•t
‚Ä¢ Truy v·∫•n l·∫°i v·ªõi ƒëi·ªÅu ki·ªán m·ªõi

Exc 5: Kho·∫£ng th·ªùi gian kh√¥ng h·ª£p l·ªá
‚Ä¢ Nh√¢n vi√™n ch·ªçn Date From l·ªõn h∆°n Date To
‚Ä¢ Hi·ªÉn th·ªã th√¥ng b√°o l·ªói d∆∞·ªõi date pickers:
   ‚Ä¢ N·ªôi dung: "Start date must be before end date"
   ‚Ä¢ Date To c√≥ vi·ªÅn m√†u ƒë·ªè
‚Ä¢ V√¥ hi·ªáu h√≥a n√∫t "Apply"
‚Ä¢ Nh√¢n vi√™n ph·∫£i ch·ªçn l·∫°i ng√†y h·ª£p l·ªá
Ti·ªÅn ƒëi·ªÅu ki·ªán
‚Ä¢ Nh√¢n vi√™n ƒë√£ ƒëƒÉng nh·∫≠p th√†nh c√¥ng (phi√™n l√†m vi·ªác h·ª£p l·ªá)
‚Ä¢ Ng∆∞·ªùi d√πng c√≥ user_type l√† 'staff' v√† position l√† 'manager', 'administrator', ho·∫∑c 'supervisor'
‚Ä¢ C√≥ √≠t nh·∫•t 1 b·∫£n ghi trong b·∫£ng printer_log
‚Ä¢ C∆° s·ªü d·ªØ li·ªáu ƒëang ho·∫°t ƒë·ªông v√† c√≥ k·∫øt n·ªëi
‚Ä¢ View printer_log_dashboard ƒë√£ ƒë∆∞·ª£c t·∫°o v√† ho·∫°t ƒë·ªông
H·∫≠u ƒëi·ªÅu ki·ªán
Khi th√†nh c√¥ng:
‚Ä¢ Nh√¢n vi√™n xem ƒë∆∞·ª£c danh s√°ch logs v·ªõi c√°c th√¥ng tin:
   ‚Ä¢ Th·ªùi gian, V·ªã tr√≠ m√°y in, Lo·∫°i, M·ª©c ƒë·ªô, M√¥ t·∫£
‚Ä¢ C√°c cards th·ªëng k√™ hi·ªÉn th·ªã ƒë√∫ng s·ªë li·ªáu
‚Ä¢ C√°c b·ªô l·ªçc v√† t√¨m ki·∫øm ho·∫°t ƒë·ªông ch√≠nh x√°c
‚Ä¢ Ph√¢n trang ho·∫°t ƒë·ªông ƒë√∫ng
‚Ä¢ Modal chi ti·∫øt hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß th√¥ng tin log
‚Ä¢ H·ªá th·ªëng ghi ho·∫°t ƒë·ªông v√†o system_audit_log:
   ‚Ä¢ action_type: 'view_system_logs'
   ‚Ä¢ user_id: ID ng∆∞·ªùi d√πng Nh√¢n vi√™n
   ‚Ä¢ timestamp: Th·ªùi gian hi·ªán t·∫°i

Khi th·∫•t b·∫°i:
‚Ä¢ Hi·ªÉn th·ªã th√¥ng b√°o l·ªói ph√π h·ª£p
‚Ä¢ D·ªØ li·ªáu kh√¥ng b·ªã thay ƒë·ªïi
‚Ä¢ H·ªá th·ªëng ghi l·ªói v√†o system_audit_log:
   ‚Ä¢ action_type: 'view_logs_failed'
   ‚Ä¢ error_details: th√¥ng tin l·ªói
Input
‚Ä¢ D·ªØ li·ªáu phi√™n: user_id, user_type t·ª´ phi√™n ƒëƒÉng nh·∫≠p ƒë√£ x√°c th·ª±c
‚Ä¢ T·ª´ kh√≥a t√¨m ki·∫øm (t√πy ch·ªçn): Chu·ªói k√Ω t·ª±, t√¨m trong m√°y in/m√¥ t·∫£/m√£ l·ªói
‚Ä¢ L·ªçc lo·∫°i (t√πy ch·ªçn): Chu·ªói, gi√° tr·ªã t·ª´ enum log_type
‚Ä¢ L·ªçc m·ª©c ƒë·ªô (t√πy ch·ªçn): Chu·ªói, gi√° tr·ªã t·ª´ enum severity
‚Ä¢ T·ª´ ng√†y (t√πy ch·ªçn): Ng√†y, ng√†y b·∫Øt ƒë·∫ßu l·ªçc
‚Ä¢ ƒê·∫øn ng√†y (t√πy ch·ªçn): Ng√†y, ng√†y k·∫øt th√∫c l·ªçc
‚Ä¢ Th·ª© t·ª± s·∫Øp x·∫øp (t√πy ch·ªçn): TƒÉng d·∫ßn ho·∫∑c gi·∫£m d·∫ßn
‚Ä¢ S·ªë trang: S·ªë nguy√™n, trang hi·ªán t·∫°i (m·∫∑c ƒë·ªãnh: 1)
‚Ä¢ K√≠ch th∆∞·ªõc trang: S·ªë nguy√™n, s·ªë h√†ng m·ªói trang (m·∫∑c ƒë·ªãnh: 10, t√πy ch·ªçn: 10/25/50/100)
Output
Th√†nh c√¥ng:
json<br>{<br>  "status": "success",<br>  "statistics": {<br>    "total_entries": 156,<br>    "errors": 12,<br>    "warnings": 23,<br>    "info": 121<br>  },<br>  "alerts": {<br>    "has_recent_errors": true,<br>    "error_count_24h": 3,<br>    "warning_count_24h": 5<br>  },<br>  "logs": [<br>    {<br>      "log_id": "uuid-1",<br>      "timestamp": "2024-12-03T14:32:00",<br>      "printer_location": "LB-101",<br>      "printer_name": "HP LaserJet Pro M404dn",<br>      "log_type": "print_job",<br>      "severity": "info",<br>      "description": "Print job completed successfully",<br>      "error_code": null<br>    },<br>    {<br>      "log_id": "uuid-2",<br>      "timestamp": "2024-12-03T13:15:00",<br>      "printer_location": "SCI-202",<br>      "printer_name": "Canon imageCLASS MF445dw",<br>      "log_type": "error",<br>      "severity": "error",<br>      "description": "Hardware malfunction detected: toner unit error",<br>      "error_code": "E-TONER-001"<br>    }<br>  ],<br>  "pagination": {<br>    "current_page": 1,<br>    "page_size": 10,<br>    "total_pages": 16,<br>    "total_records": 156<br>  },<br>  "filters_applied": {<br>    "search": null,<br>    "type": "all",<br>    "severity": "all",<br>    "date_from": null,<br>    "date_to": null<br>  }<br>}<br>

Th·∫•t b·∫°i - Kh√¥ng c√≥ quy·ªÅn:
json<br>{<br>  "status": "error",<br>  "error_code": "UNAUTHORIZED",<br>  "message": "B·∫°n kh√¥ng c√≥ quy·ªÅn xem system logs.",<br>  "details": {<br>    "user_type": "student",<br>    "required_type": "staff"<br>  }<br>}<br>

Th·∫•t b·∫°i - L·ªói c∆° s·ªü d·ªØ li·ªáu:
json<br>{<br>  "status": "error",<br>  "error_code": "DATABASE_ERROR",<br>  "message": "Kh√¥ng th·ªÉ t·∫£i logs. Vui l√≤ng th·ª≠ l·∫°i.",<br>  "details": {<br>    "error": "Connection timeout",<br>    "timestamp": "2024-12-03T14:30:00"<br>  }<br>}<br>


NV-5-2: Xu·∫•t b√°o c√°o log ra File
M·ª•c
N·ªôi dung
Use Case ID
NV-5-2
T√™n
Xu·∫•t b√°o c√°o log ra File
M√¥ t·∫£
Nh√¢n vi√™n xu·∫•t danh s√°ch logs ƒëang hi·ªÉn th·ªã (sau khi l·ªçc) th√†nh file Excel ho·∫∑c PDF ƒë·ªÉ l∆∞u tr·ªØ, b√°o c√°o ho·∫∑c ph√¢n t√≠ch offline
Actor
Nh√¢n vi√™n
Trigger
Nh√¢n vi√™n nh·∫•n n√∫t "Export" tr√™n trang danh s√°ch logs
Quy ƒë·ªãnh nghi·ªáp v·ª•
‚Ä¢ Ch·ªâ Nh√¢n vi√™n m·ªõi c√≥ quy·ªÅn xu·∫•t b√°o c√°o logs
‚Ä¢ File ch·ªâ bao g·ªìm logs ƒëang hi·ªÉn th·ªã (sau khi √°p d·ª•ng b·ªô l·ªçc)
‚Ä¢ Gi·ªõi h·∫°n Excel: t·ªëi ƒëa 1000 logs
‚Ä¢ Gi·ªõi h·∫°n PDF: t·ªëi ƒëa 100 logs
‚Ä¢ N·∫øu v∆∞·ª£t gi·ªõi h·∫°n: hi·ªÉn th·ªã l·ªói v√† y√™u c·∫ßu l·ªçc
‚Ä¢ Excel bao g·ªìm: Sheet "Summary" (th·ªëng k√™, b·ªô l·ªçc) v√† Sheet "Logs" (d·ªØ li·ªáu b·∫£ng ƒë·∫ßy ƒë·ªß 11 c·ªôt)
‚Ä¢ PDF bao g·ªìm: ph·∫ßn ƒë·∫ßu (logo, ti√™u ƒë·ªÅ), t√≥m t·∫Øt (th·ªëng k√™), b·ªô l·ªçc ƒë√£ √°p d·ª•ng, d·ªØ li·ªáu b·∫£ng, ph·∫ßn cu·ªëi (s·ªë trang, th·ªùi gian, ng∆∞·ªùi xu·∫•t)
‚Ä¢ PDF c√≥ t√πy ch·ªçn bao g·ªìm chi ti·∫øt ƒë·∫ßy ƒë·ªß (detailed mode) ho·∫∑c ch·ªâ t√≥m t·∫Øt
‚Ä¢ ƒê·ªãnh d·∫°ng t√™n file Excel: system_logs_[YYYY-MM-DD_HH-MM].xlsx
‚Ä¢ ƒê·ªãnh d·∫°ng t√™n file PDF: system_logs_[YYYY-MM-DD_HH-MM].pdf
‚Ä¢ H√†nh ƒë·ªông xu·∫•t ƒë∆∞·ª£c ghi v√†o system_audit_log
Main Flow
B∆∞·ªõc 1: M·ªü h·ªôp tho·∫°i xu·∫•t
1. Nh√¢n vi√™n ƒë√£ xem danh s√°ch logs (sau khi √°p d·ª•ng b·ªô l·ªçc)
2. Nh√¢n vi√™n nh·∫•n n√∫t "Export" b√™n c·∫°nh ti√™u ƒë·ªÅ b·∫£ng
3. H·ªá th·ªëng ƒë·∫øm s·ªë logs hi·ªán t·∫°i (sau khi l·ªçc)
4. Hi·ªÉn th·ªã h·ªôp tho·∫°i "Export Logs":
  ‚Ä¢ Ti√™u ƒë·ªÅ: "Export Logs"
  ‚Ä¢ N·ªôi dung: "Export [X] logs currently displayed?"
  ‚Ä¢ Hi·ªÉn th·ªã t√≥m t·∫Øt:
    ‚Ä¢ T·ªïng s·ªë logs: [X]
    ‚Ä¢ Kho·∫£ng th·ªùi gian: [t·ª´ ng√†y] to [ƒë·∫øn ng√†y] (n·∫øu c√≥ b·ªô l·ªçc)
    ‚Ä¢ B·ªô l·ªçc: [danh s√°ch b·ªô l·ªçc ƒë√£ √°p d·ª•ng]
  ‚Ä¢ Radio buttons "Format":
    ‚Ä¢ "Excel (max 1000 records)" (ch·ªçn m·∫∑c ƒë·ªãnh)
    ‚Ä¢ "PDF (max 100 records)"
  ‚Ä¢ Checkbox "Include detailed information" (b·ªã ·∫©n, ch·ªâ hi·ªán khi ch·ªçn PDF)
  ‚Ä¢ N√∫t "Cancel" v√† "Export"

B∆∞·ªõc 2: Nh√¢n vi√™n ch·ªçn Excel format (Main Path)
5. Radio button "Excel" ƒë∆∞·ª£c ch·ªçn (m·∫∑c ƒë·ªãnh)
6. Checkbox "Include detailed information" b·ªã ·∫©n
7. H·ªá th·ªëng ki·ªÉm tra s·ªë logs:
  ‚Ä¢ N·∫øu s·ªë logs ‚â§ 1000: cho ph√©p xu·∫•t
  ‚Ä¢ N·∫øu s·ªë logs > 1000: chuy·ªÉn sang Exception Flow Exc 2

B∆∞·ªõc 3: Xu·∫•t Excel
8. Nh√¢n vi√™n nh·∫•n n√∫t "Export"
9. H·ªôp tho·∫°i ƒë√≥ng
10. Hi·ªÉn th·ªã l·ªõp ph·ªß ƒëang t·∫£i tr√™n to√†n m√†n h√¨nh:
  ‚Ä¢ Hi·ªáu ·ª©ng xoay v√≤ng (spinner)
  ‚Ä¢ N·ªôi dung: "Generating Excel..."
  ‚Ä¢ Thanh ti·∫øn tr√¨nh (n·∫øu c√≥ nhi·ªÅu h∆°n 200 logs)
  ‚Ä¢ Th·ªùi gian ∆∞·ªõc t√≠nh: "[X] seconds remaining"

B∆∞·ªõc 4: T·∫°o Excel
11. H·ªá th·ªëng truy v·∫•n to√†n b·ªô logs c·∫ßn xu·∫•t:
  ‚Ä¢ √Åp d·ª•ng t·∫•t c·∫£ b·ªô l·ªçc ƒëang c√≥
  ‚Ä¢ Gi·ªõi h·∫°n t·ªëi ƒëa 1000 logs
  ‚Ä¢ Truy v·∫•n t·∫•t c·∫£ c·ªôt: log_id, timestamp, type, severity, message, user_id, user_full_name, printer_id, printer_name, ip_address, metadata
12. H·ªá th·ªëng t·∫°o file Excel (.xlsx) v·ªõi c·∫•u tr√∫c:

  Sheet 1: "Summary"
  ‚Ä¢ Ti√™u ƒë·ªÅ: "System Logs Export Summary" (A1, in ƒë·∫≠m, 14pt)
  ‚Ä¢ Export Information:
    ‚Ä¢ Exported at: [YYYY-MM-DD HH:MM] (A3)
    ‚Ä¢ Exported by: [T√™n Nh√¢n vi√™n] (A4)
    ‚Ä¢ Total logs: [X] (A5)
  ‚Ä¢ Filters Applied (A7):
    ‚Ä¢ Type: [lo·∫°i ho·∫∑c "All"] (A8)
    ‚Ä¢ Severity: [m·ª©c ƒë·ªô ho·∫∑c "All"] (A9)
    ‚Ä¢ Search keyword: [t·ª´ kh√≥a ho·∫∑c "None"] (A10)
    ‚Ä¢ Date range: [ng√†y ho·∫∑c "All time"] (A11)
  ‚Ä¢ Statistics (A13):
    ‚Ä¢ Total logs: [X] (A14)
    ‚Ä¢ Errors: [Y] (A15)
    ‚Ä¢ Warnings: [Z] (A16)
    ‚Ä¢ Info: [W] (A17)

  Sheet 2: "Logs"
  ‚Ä¢ Header row (Row 1, in ƒë·∫≠m, n·ªÅn x√°m nh·∫°t, text cƒÉn gi·ªØa):
    ‚Ä¢ A1: Log ID
    ‚Ä¢ B1: Timestamp
    ‚Ä¢ C1: Type
    ‚Ä¢ D1: Severity
    ‚Ä¢ E1: Message
    ‚Ä¢ F1: User ID
    ‚Ä¢ G1: User Name
    ‚Ä¢ H1: Printer ID
    ‚Ä¢ I1: Printer Name
    ‚Ä¢ J1: IP Address
    ‚Ä¢ K1: Metadata
  ‚Ä¢ Data rows (t·ª´ Row 2):
    ‚Ä¢ M·ªói row = 1 log
    ‚Ä¢ Timestamp format: YYYY-MM-DD HH:MM:SS
    ‚Ä¢ Severity: m√†u text theo m·ª©c ƒë·ªô (error=ƒë·ªè, warning=cam, info=xanh)
    ‚Ä¢ Metadata: JSON string ho·∫∑c ƒë·ªÉ tr·ªëng
  ‚Ä¢ Column widths:
    ‚Ä¢ Log ID: 15
    ‚Ä¢ Timestamp: 20
    ‚Ä¢ Type: 15
    ‚Ä¢ Severity: 12
    ‚Ä¢ Message: 50
    ‚Ä¢ User ID: 15
    ‚Ä¢ User Name: 25
    ‚Ä¢ Printer ID: 15
    ‚Ä¢ Printer Name: 25
    ‚Ä¢ IP Address: 15
    ‚Ä¢ Metadata: 30
  ‚Ä¢ Freeze panes: Header row (Row 1) lu√¥n hi·ªÉn th·ªã khi scroll
  ‚Ä¢ Auto-filter: B·∫≠t cho t·∫•t c·∫£ c·ªôt

B∆∞·ªõc 5: Ho√†n t·∫•t
13. File Excel ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng
14. File t·ª± ƒë·ªông t·∫£i xu·ªëng v·ªÅ m√°y Nh√¢n vi√™n
15. T√™n file: system_logs_[YYYY-MM-DD_HH-MM].xlsx
16. L·ªõp ph·ªß ƒëang t·∫£i ƒë√≥ng
17. Hi·ªÉn th·ªã th√¥ng b√°o n·ªïi th√†nh c√¥ng:
  ‚Ä¢ Icon: ‚úì
  ‚Ä¢ N·ªôi dung: "Excel exported successfully"
  ‚Ä¢ N·ªôi dung ph·ª•: "[X] logs exported"
  ‚Ä¢ T·ª± ƒë·ªông ƒë√≥ng sau 3 gi√¢y
18. H·ªá th·ªëng ghi v√†o system_audit_log:
  ‚Ä¢ action_type: 'export_logs_excel'
  ‚Ä¢ user_id: ID ng∆∞·ªùi d√πng Nh√¢n vi√™n
  ‚Ä¢ details: JSON {
     "log_count": [X],
     "format": "excel",
     "filters": {...},
     "file_size_kb": [Y]
  }
  ‚Ä¢ timestamp: Th·ªùi gian hi·ªán t·∫°i
Alternative Flow
Alt 1: Xu·∫•t PDF thay v√¨ Excel
1. T·∫°i h·ªôp tho·∫°i xu·∫•t (Main Flow b∆∞·ªõc 4)
2. Nh√¢n vi√™n ch·ªçn radio button "PDF"
3. Checkbox "Include detailed information" hi·ªÉn th·ªã (kh√¥ng ch·ªçn m·∫∑c ƒë·ªãnh)
4. H·ªá th·ªëng ki·ªÉm tra s·ªë logs:
  ‚Ä¢ N·∫øu s·ªë logs ‚â§ 100: cho ph√©p xu·∫•t
  ‚Ä¢ N·∫øu s·ªë logs > 100: hi·ªÉn th·ªã c·∫£nh b√°o trong h·ªôp tho·∫°i:
    ‚Ä¢ Icon: ‚ö†Ô∏è
    ‚Ä¢ N·ªôi dung: "Cannot export [X] logs to PDF. Maximum: 100."
    ‚Ä¢ G·ª£i √Ω: "Please either apply filters or switch to Excel format (max 1000)"
    ‚Ä¢ N√∫t "Export" b·ªã v√¥ hi·ªáu h√≥a
5. Nh√¢n vi√™n ch·ªçn ho·∫∑c b·ªè ch·ªçn "Include detailed information"
6. Nh√¢n vi√™n nh·∫•n n√∫t "Export"
7. H·ªôp tho·∫°i ƒë√≥ng
8. Hi·ªÉn th·ªã l·ªõp ph·ªß ƒëang t·∫£i:
  ‚Ä¢ N·ªôi dung: "Generating PDF..."
  ‚Ä¢ Thanh ti·∫øn tr√¨nh (n·∫øu c√≥ nhi·ªÅu h∆°n 50 logs)
9. H·ªá th·ªëng truy v·∫•n logs:
  ‚Ä¢ √Åp d·ª•ng t·∫•t c·∫£ b·ªô l·ªçc
  ‚Ä¢ Gi·ªõi h·∫°n t·ªëi ƒëa 100 logs
  ‚Ä¢ N·∫øu ch·ªçn "Include details": truy v·∫•n th√™m th√¥ng tin chi ti·∫øt
10. H·ªá th·ªëng t·∫°o PDF v·ªõi c·∫•u tr√∫c:

  Ph·∫ßn ƒë·∫ßu (m·ªói trang):
  ‚Ä¢ Logo HCMSIU (tr√°i)
  ‚Ä¢ Ti√™u ƒë·ªÅ "System Logs Report" (gi·ªØa, in ƒë·∫≠m, 18pt)
  ‚Ä¢ Ng√†y xu·∫•t: [YYYY-MM-DD HH:MM] (ph·∫£i)
  ‚Ä¢ Ng∆∞·ªùi xu·∫•t: [T√™n Nh√¢n vi√™n] (ph·∫£i)

  Trang 1 - T√≥m t·∫Øt:
  ‚Ä¢ Ph·∫ßn "Filters Applied"
    ‚Ä¢ Lo·∫°i: [lo·∫°i ƒë√£ ch·ªçn ho·∫∑c "All"]
    ‚Ä¢ M·ª©c ƒë·ªô: [m·ª©c ƒë·ªô ƒë√£ ch·ªçn ho·∫∑c "All"]
    ‚Ä¢ T·ª´ kh√≥a t√¨m ki·∫øm: [t·ª´ kh√≥a ho·∫∑c "None"]
    ‚Ä¢ Kho·∫£ng th·ªùi gian: [ng√†y ho·∫∑c "All time"]
  ‚Ä¢ Ph·∫ßn "Statistics"
    ‚Ä¢ Total logs: [X]
    ‚Ä¢ Errors: [Y]
    ‚Ä¢ Warnings: [Z]
    ‚Ä¢ Info: [W]

  Trang 2+ - B·∫£ng:
  ‚Ä¢ B·∫£ng 5 c·ªôt:
    ‚Ä¢ Timestamp (20%)
    ‚Ä¢ Type (15%)
    ‚Ä¢ Severity (15%)
    ‚Ä¢ Message (40%)
    ‚Ä¢ User (10%)
  ‚Ä¢ M·ªói h√†ng hi·ªÉn th·ªã 1 log
  ‚Ä¢ T·ª± ƒë·ªông ng·∫Øt trang khi ƒë·∫ßy

  Trang cu·ªëi (n·∫øu ch·ªçn Include details):
  ‚Ä¢ M·ªói log chi ti·∫øt tr√™n 1 trang ri√™ng
  ‚Ä¢ Bao g·ªìm: full message, stack trace (n·∫øu c√≥), metadata, related data

  Ph·∫ßn cu·ªëi (m·ªói trang):
  ‚Ä¢ S·ªë trang: "Page [X] of [Y]" (ph·∫£i)
  ‚Ä¢ Th·ªùi gian t·∫°o: [YYYY-MM-DD HH:MM] (tr√°i)

11. PDF ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng
12. File t·ª± ƒë·ªông t·∫£i xu·ªëng: system_logs_[YYYY-MM-DD_HH-MM].pdf
13. L·ªõp ph·ªß ƒë√≥ng
14. Hi·ªÉn th·ªã th√¥ng b√°o n·ªïi: "PDF exported successfully - [X] logs exported"
15. Ghi v√†o system_audit_log:
  ‚Ä¢ action_type: 'export_logs_pdf'
  ‚Ä¢ details: JSON { "log_count": [X], "format": "pdf", "include_details": true/false, "filters": {...}, "file_size_kb": [Y] }

Alt 2: H·ªßy xu·∫•t
‚Ä¢ T·∫°i h·ªôp tho·∫°i xu·∫•t, Nh√¢n vi√™n nh·∫•n "Cancel"
‚Ä¢ H·ªôp tho·∫°i ƒë√≥ng
‚Ä¢ Kh√¥ng t·∫°o file
‚Ä¢ Kh√¥ng ghi log
‚Ä¢ ·ªû l·∫°i trang danh s√°ch logs
Exception Flow
Exc 1: Kh√¥ng c√≥ logs ƒë·ªÉ xu·∫•t
‚Ä¢ Nh√¢n vi√™n ƒë√£ l·ªçc ƒë·∫øn kh√¥ng c√≤n log n√†o
‚Ä¢ Nh·∫•n "Export"
‚Ä¢ Hi·ªÉn th·ªã th√¥ng b√°o n·ªïi:
  ‚Ä¢ Icon: ‚ÑπÔ∏è
  ‚Ä¢ N·ªôi dung: "No logs to export"
  ‚Ä¢ N·ªôi dung ph·ª•: "Please adjust your filters"
‚Ä¢ Kh√¥ng m·ªü h·ªôp tho·∫°i

Exc 2: Qu√° nhi·ªÅu logs cho Excel (> 1000)
‚Ä¢ Nh√¢n vi√™n ch·ªçn Excel khi c√≥ nhi·ªÅu h∆°n 1000 logs
‚Ä¢ H·ªôp tho·∫°i hi·ªÉn th·ªã c·∫£nh b√°o:
  ‚Ä¢ Icon: ‚ö†Ô∏è
  ‚Ä¢ N·ªôi dung: "Cannot export [X] logs to Excel. Maximum: 1000."
  ‚Ä¢ G·ª£i √Ω: "Please apply filters to reduce dataset:"
  ‚Ä¢ Danh s√°ch g·ª£i √Ω:
    ‚Ä¢ "Use date range (e.g., last 30 days)"
    ‚Ä¢ "Filter by specific printer or type"
    ‚Ä¢ "Filter by severity level"
‚Ä¢ N√∫t "Export" b·ªã v√¥ hi·ªáu h√≥a
‚Ä¢ Nh√¢n vi√™n ph·∫£i ƒë√≥ng h·ªôp tho·∫°i v√† l·ªçc l·∫°i

Exc 3: L·ªói khi t·∫°o file
‚Ä¢ Trong qu√° tr√¨nh t·∫°o file, g·∫∑p l·ªói (b·ªô nh·ªõ, x·ª≠ l√Ω)
‚Ä¢ L·ªõp ph·ªß ƒëang t·∫£i ƒë√≥ng
‚Ä¢ Hi·ªÉn th·ªã th√¥ng b√°o n·ªïi l·ªói:
  ‚Ä¢ Icon: ‚ùå
  ‚Ä¢ N·ªôi dung: "Failed to generate [format]"
  ‚Ä¢ N·ªôi dung ph·ª•: "Please try again or reduce dataset"
  ‚Ä¢ N√∫t "Retry" v√† "Dismiss"
‚Ä¢ N·∫øu nh·∫•n "Retry": m·ªü l·∫°i h·ªôp tho·∫°i xu·∫•t
‚Ä¢ Ghi l·ªói v√†o system_audit_log:
  ‚Ä¢ action_type: 'export_logs_failed'
  ‚Ä¢ error_details: th√¥ng tin l·ªói

Exc 4: Timeout khi truy v·∫•n d·ªØ li·ªáu
‚Ä¢ Truy v·∫•n m·∫•t nhi·ªÅu h∆°n 60 gi√¢y
‚Ä¢ L·ªõp ph·ªß ƒëang t·∫£i hi·ªÉn th·ªã c·∫£nh b√°o:
  ‚Ä¢ N·ªôi dung: "This is taking longer than expected..."
  ‚Ä¢ N√∫t "Cancel Export"
‚Ä¢ Sau 90 gi√¢y: timeout
‚Ä¢ Hi·ªÉn th·ªã l·ªói: "Export timeout. Please try again."
‚Ä¢ Kh√¥ng t·∫°o file

Exc 5: Kh√¥ng c√≥ quy·ªÅn xu·∫•t
‚Ä¢ Ng∆∞·ªùi d√πng kh√¥ng ph·∫£i Nh√¢n vi√™n
‚Ä¢ Nh·∫•n "Export"
‚Ä¢ Hi·ªÉn th·ªã th√¥ng b√°o n·ªïi:
  ‚Ä¢ Icon: üîí
  ‚Ä¢ N·ªôi dung: "Access denied"
  ‚Ä¢ N·ªôi dung ph·ª•: "You don't have permission to export logs"
‚Ä¢ Kh√¥ng m·ªü h·ªôp tho·∫°i

Exc 6: L·ªói t·∫£i xu·ªëng file
‚Ä¢ File ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng nh∆∞ng tr√¨nh duy·ªát kh√¥ng th·ªÉ t·∫£i xu·ªëng
‚Ä¢ Hi·ªÉn th·ªã l·ªói:
  ‚Ä¢ N·ªôi dung: "Failed to download file. Please check browser settings."
  ‚Ä¢ N√∫t "Try Again"
‚Ä¢ N·∫øu nh·∫•n "Try Again": k√≠ch ho·∫°t t·∫£i xu·ªëng l·∫°i
‚Ä¢ File v·∫´n ƒë∆∞·ª£c t·∫°o ·ªü server (c√≥ th·ªÉ t·∫£i xu·ªëng t·ª´ link tr·ª±c ti·∫øp)
Ti·ªÅn ƒëi·ªÅu ki·ªán
‚Ä¢ Nh√¢n vi√™n ƒë√£ ƒëƒÉng nh·∫≠p th√†nh c√¥ng (phi√™n l√†m vi·ªác h·ª£p l·ªá)
‚Ä¢ Ng∆∞·ªùi d√πng c√≥ user_type l√† 'staff'
‚Ä¢ C√≥ √≠t nh·∫•t 1 log trong k·∫øt qu·∫£ hi·ªán t·∫°i (sau khi l·ªçc)
‚Ä¢ S·ªë logs: ‚â§ 1000 cho Excel, ‚â§ 100 cho PDF
‚Ä¢ Server c√≥ ƒë·ªß t√†i nguy√™n ƒë·ªÉ t·∫°o file (b·ªô nh·ªõ, CPU)
‚Ä¢ Tr√¨nh duy·ªát h·ªó tr·ª£ t·∫£i xu·ªëng file
H·∫≠u ƒëi·ªÅu ki·ªán
Khi th√†nh c√¥ng (Excel):
‚Ä¢ File Excel ƒë∆∞·ª£c t·∫°o v√† t·∫£i xu·ªëng: system_logs_[YYYY-MM-DD_HH-MM].xlsx
‚Ä¢ Excel bao g·ªìm:
  ‚Ä¢ Sheet "Summary": th·ªëng k√™, b·ªô l·ªçc, metadata
  ‚Ä¢ Sheet "Logs": b·∫£ng ƒë·∫ßy ƒë·ªß 11 c·ªôt v·ªõi t·∫•t c·∫£ logs ƒë√£ l·ªçc, header row, auto-filter, freeze panes
‚Ä¢ H√†nh ƒë·ªông ƒë∆∞·ª£c ghi v√†o system_audit_log v·ªõi action_type: 'export_logs_excel'
‚Ä¢ Th√¥ng b√°o n·ªïi hi·ªÉn th·ªã th√†nh c√¥ng

Khi th√†nh c√¥ng (PDF):
‚Ä¢ File PDF ƒë∆∞·ª£c t·∫°o v√† t·∫£i xu·ªëng: system_logs_[YYYY-MM-DD_HH-MM].pdf
‚Ä¢ PDF bao g·ªìm:
  ‚Ä¢ Ph·∫ßn ƒë·∫ßu v·ªõi logo, ti√™u ƒë·ªÅ, ng√†y xu·∫•t, ng∆∞·ªùi xu·∫•t
  ‚Ä¢ Trang t√≥m t·∫Øt v·ªõi th·ªëng k√™ v√† b·ªô l·ªçc
  ‚Ä¢ B·∫£ng v·ªõi t·∫•t c·∫£ logs ƒë√£ l·ªçc
  ‚Ä¢ Trang chi ti·∫øt (n·∫øu ƒë∆∞·ª£c ch·ªçn)
  ‚Ä¢ Ph·∫ßn cu·ªëi v·ªõi s·ªë trang v√† metadata
‚Ä¢ H√†nh ƒë·ªông ƒë∆∞·ª£c ghi v√†o system_audit_log v·ªõi action_type: 'export_logs_pdf'
‚Ä¢ Th√¥ng b√°o n·ªïi hi·ªÉn th·ªã th√†nh c√¥ng

Khi th·∫•t b·∫°i:
‚Ä¢ Kh√¥ng t·∫°o file
‚Ä¢ Hi·ªÉn th·ªã th√¥ng b√°o l·ªói c·ª• th·ªÉ
‚Ä¢ H·ªá th·ªëng ghi l·ªói v√†o system_audit_log
‚Ä¢ Nh√¢n vi√™n c√≥ th·ªÉ th·ª≠ l·∫°i ho·∫∑c ƒëi·ªÅu ch·ªânh b·ªô l·ªçc
Input
‚Ä¢ D·ªØ li·ªáu phi√™n: user_id, user_type t·ª´ phi√™n ƒëƒÉng nh·∫≠p ƒë√£ x√°c th·ª±c
‚Ä¢ Logs c·∫ßn xu·∫•t: Danh s√°ch logs sau khi √°p d·ª•ng b·ªô l·ªçc/t√¨m ki·∫øm
‚Ä¢ Format: "excel" ho·∫∑c "pdf"
‚Ä¢ Bao g·ªìm chi ti·∫øt (ch·ªâ PDF): Boolean (m·∫∑c ƒë·ªãnh: false)
‚Ä¢ B·ªô l·ªçc hi·ªán t·∫°i: Object {
  search: Chu·ªói,
  type: Chu·ªói,
  severity: Chu·ªói,
  date_from: Ng√†y,
  date_to: Ng√†y
}
‚Ä¢ Th·ªëng k√™: Object {
  total: S·ªë nguy√™n,
  errors: S·ªë nguy√™n,
  warnings: S·ªë nguy√™n,
  info: S·ªë nguy√™n
}
Output
Th√†nh c√¥ng (Excel):
json<br>{<br>  "status": "success",<br>  "message": "Excel exported successfully",<br>  "file": {<br>    "filename": "system_logs_2024-12-09_15-30.xlsx",<br>    "size_kb": 1024,<br>    "download_url": "/downloads/system_logs_2024-12-09_15-30.xlsx",<br>    "expires_at": "2024-12-09T16:30:00"<br>  },<br>  "export_summary": {<br>    "format": "excel",<br>    "log_count": 645,<br>    "sheets": ["Summary", "Logs"],<br>    "columns": 11,<br>    "filters_applied": {...}<br>  },<br>  "exported_at": "2024-12-09T15:30:45",<br>  "exported_by": {<br>    "user_id": "uuid-staff",<br>    "full_name": "Nguy·ªÖn VƒÉn A"<br>  }<br>}<br>

Th√†nh c√¥ng (PDF):
json<br>{<br>  "status": "success",<br>  "message": "PDF exported successfully",<br>  "file": {<br>    "filename": "system_logs_2024-12-09_15-30.pdf",<br>    "size_kb": 512,<br>    "download_url": "/downloads/system_logs_2024-12-09_15-30.pdf",<br>    "expires_at": "2024-12-09T16:30:00"<br>  },<br>  "export_summary": {<br>    "format": "pdf",<br>    "log_count": 87,<br>    "page_count": 5,<br>    "include_details": false,<br>    "filters_applied": {...}<br>  },<br>  "exported_at": "2024-12-09T15:30:45",<br>  "exported_by": {<br>    "user_id": "uuid-staff",<br>    "full_name": "Nguy·ªÖn VƒÉn A"<br>  }<br>}<br>

Th·∫•t b·∫°i - Qu√° nhi·ªÅu logs:
json<br>{<br>  "status": "error",<br>  "error_code": "TOO_MANY_LOGS",<br>  "message": "Kh√¥ng th·ªÉ xu·∫•t qu√° nhi·ªÅu logs.",<br>  "details": {<br>    "format": "excel",<br>    "current_count": 1543,<br>    "maximum_allowed": 1000,<br>    "exceeded_by": 543<br>  },<br>  "suggestion": "Vui l√≤ng √°p d·ª•ng b·ªô l·ªçc ƒë·ªÉ gi·∫£m s·ªë l∆∞·ª£ng logs."<br>}<br>

Th·∫•t b·∫°i - L·ªói t·∫°o file:
json<br>{<br>  "status": "error",<br>  "error_code": "FILE_GENERATION_FAILED",<br>  "message": "Kh√¥ng th·ªÉ t·∫°o file.",<br>  "details": {<br>    "format": "excel",<br>    "error": "Memory allocation failed",<br>    "log_count": 890<br>  },<br>  "suggestion": "Vui l√≤ng th·ª≠ l·∫°i."<br>}<br>

Th·∫•t b·∫°i - Kh√¥ng c√≥ quy·ªÅn:
json<br>{<br>  "status": "error",<br>  "error_code": "UNAUTHORIZED",<br>  "message": "B·∫°n kh√¥ng c√≥ quy·ªÅn xu·∫•t logs.",<br>  "details": {<br>    "user_type": "student",<br>    "required_type": "staff"<br>  }<br>}<br>
Technical Notes
Th∆∞ vi·ªán:
‚Ä¢ Excel: ExcelJS (backend)
‚Ä¢ PDF: PDFKit (backend)
‚Ä¢ T·∫°o ·ªü backend ƒë·ªÉ tr√°nh qu√° t·∫£i tr√¨nh duy·ªát

Excel - C·∫•u tr√∫c:
‚Ä¢ 2 sheets: Summary v√† Logs
‚Ä¢ Sheet "Logs" - 11 c·ªôt:
 ‚Ä¢ A: Log ID (width: 15)
 ‚Ä¢ B: Timestamp (width: 20, format: YYYY-MM-DD HH:MM:SS)
 ‚Ä¢ C: Type (width: 15)
 ‚Ä¢ D: Severity (width: 12, colored text)
 ‚Ä¢ E: Message (width: 50)
 ‚Ä¢ F: User ID (width: 15)
 ‚Ä¢ G: User Name (width: 25)
 ‚Ä¢ H: Printer ID (width: 15)
 ‚Ä¢ I: Printer Name (width: 25)
 ‚Ä¢ J: IP Address (width: 15)
 ‚Ä¢ K: Metadata (width: 30, JSON string)
‚Ä¢ Header row: in ƒë·∫≠m, n·ªÅn x√°m nh·∫°t, text cƒÉn gi·ªØa
‚Ä¢ Freeze panes ·ªü row 1
‚Ä¢ Auto-filter b·∫≠t cho t·∫•t c·∫£ c·ªôt
‚Ä¢ Severity colors: error=#FF0000, warning=#FFA500, info=#0000FF

PDF - C·∫•u tr√∫c:
‚Ä¢ ƒê·ªãnh d·∫°ng: PDF 1.7, kh·ªï A4, h∆∞·ªõng d·ªçc
‚Ä¢ Ph·∫ßn ƒë·∫ßu: Logo HCMSIU, ti√™u ƒë·ªÅ, ng√†y xu·∫•t, ng∆∞·ªùi xu·∫•t
‚Ä¢ Trang t√≥m t·∫Øt: th·ªëng k√™ v√† b·ªô l·ªçc
‚Ä¢ B·∫£ng 5 c·ªôt: Timestamp (20%), Type (15%), Severity (15%), Message (40%), User (10%)
‚Ä¢ Trang chi ti·∫øt (n·∫øu ƒë∆∞·ª£c ch·ªçn): m·ªói log tr√™n 1 trang ri√™ng
‚Ä¢ Ph·∫ßn cu·ªëi: s·ªë trang, th·ªùi gian t·∫°o


